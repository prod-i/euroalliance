<template>
  <div>
    <!-- üé© -->
    <div class="head">
      <div class="head-content">
        <div class="head-title">
          –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –≤–∫–ª–∞–¥—ã
        </div>
      </div>
      <div class="head-aside">
        <ul class="tabs tabs--white">
          <li v-for="(button, index) in buttons" :key="index">
            <tab-default
              :title="button.title"
              :is-active="activeButtonId === index"
              :count="button.count"
              @click="setActiveButton(index)"
            />
          </li>
        </ul>
      </div>
    </div>
    <div class="offers">
      <template v-for="(info, index) in infoData">
        <info-card
          v-if="index < 3 && $route.path === '/'"
          :key="index"
          :title="info.title"
          :description="info.description"
          :link="info.link"
          :img="info.img"
          :items="info.items"
          :buttons-text="['–û—Ñ–æ—Ä–º–∏—Ç—å –≤–∫–ª–∞–¥', '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤–∫–ª–∞–¥']"
          custom-class="offer--white"
        />
        <info-card
          v-else-if="$route.path !== '/'"
          :key="index"
          :title="info.title"
          :description="info.description"
          :link="info.link"
          :img="info.img"
          :items="info.items"
          :buttons-text="['–û—Ñ–æ—Ä–º–∏—Ç—å –≤–∫–ª–∞–¥', '–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤–∫–ª–∞–¥']"
          custom-class="offer--white"
        />
      </template>
    </div>
    <div v-if="$route.path === '/'" class="offset-footer center">
      <button class="btn btn--white btn--full">
        –ü–æ–∫–∞–∑–∞—Ç—å –µ—â—ë
      </button>
    </div>
  </div>
</template>
<script>
import TabDefault from '~/components/ui/tab/tab-default.vue'
import InfoCard from '~/components/cards/info-card.vue'
import infoDepositsData from '~/mocks/info-deposits-data'

export default {
  components: {
    TabDefault,
    InfoCard
  },
  data () {
    return {
      infoData: infoDepositsData,
      buttons: [
        { title: '–í—Å–µ', count: 10 },
        { title: '–í —Ä—É–±–ª—è—Ö', count: 4 },
        { title: '–ü–µ–Ω—Å–∏–æ–Ω–Ω—ã–µ', count: 6 }
      ],
      activeButtonId: 0 // –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –ø–µ—Ä–≤–æ–π –∫–Ω–æ–ø–∫–∏
    }
  },
  computed: {
    filteredCards () {
      if (this.activeButtonId !== 'all') {
        return this.cardData.filter(
          card => card.type === this.activeButtonId
        )
      }
      return this.cardData
    },
    filteredCardsCount () {
      return this.filteredCards.length
    }
  },
  methods: {
    setActiveButton (id) {
      this.activeButtonId = id
    }
  }
}
</script>
